(module
  (type $ft (;0;) (func (result i32)))
  (type $st (;1;) (struct (field i16)))
  (type $at (;2;) (array i8))
  (type (;3;) (func (param externref)))
  (type (;4;) (func (param i32) (result i32)))
  (type (;5;) (func (param structref) (result (ref $st))))
  (type (;6;) (func (param structref) (result (ref $at))))
  (table (;0;) 10 anyref)
  (export "init" (func 1))
  (export "br_on_non_null" (func 2))
  (export "br_on_non_i31" (func 3))
  (export "br_on_non_struct" (func 4))
  (export "br_on_non_array" (func 5))
  (export "null-diff" (func 6))
  (elem (;0;) declare func $f)
  (func $f (;0;) (type $ft) (result i32)
    (i32.const 9)
  )
  (func (;1;) (type 3) (param $x externref)
    (table.set 0
      (i32.const 0)
      (ref.null any))
    (table.set 0
      (i32.const 1)
      (ref.i31
        (i32.const 7)))
    (table.set 0
      (i32.const 2)
      (struct.new $st
        (i32.const 6)))
    (table.set 0
      (i32.const 3)
      (array.new $at
        (i32.const 5)
        (i32.const 3)))
    (table.set 0
      (i32.const 4)
      (any.convert_extern
        (local.get $x)))
  )
  (func (;2;) (type 4) (param $i i32) (result i32)
    (block $l (result (ref any))
      (br_on_non_null $l
        (table.get 0
          (local.get $i)))
      (return
        (i32.const 0)))
    (return
      (i32.const -1))
  )
  (func (;3;) (type 4) (param $i i32) (result i32)
    (block $l (result anyref)
      (return
        (i31.get_u
          (br_on_cast_fail $l anyref (ref i31)
            (table.get 0
              (local.get $i))))))
    (return
      (i32.const -1))
  )
  (func (;4;) (type 4) (param $i i32) (result i32)
    (block $l (result anyref)
      (br_on_cast_fail $l anyref (ref struct)
        (table.get 0
          (local.get $i)))
      (return
        (struct.get_s $st 0
          (block $l2 (type 5) (param structref) (result (ref $st))
            (return
              (array.get_u $at
                (block $l3 (type 6) (param structref) (result (ref $at))
                  (br_on_cast $l3 anyref (ref $at)
                    (br_on_cast $l2 structref (ref $st)))
                  (return
                    (i32.const -2)))
                (i32.const 0)))))))
    (return
      (i32.const -1))
  )
  (func (;5;) (type 4) (param $i i32) (result i32)
    (block $l (result anyref)
      (return
        (array.len
          (br_on_cast_fail $l anyref (ref array)
            (table.get 0
              (local.get $i))))))
    (return
      (i32.const -1))
  )
  (func (;6;) (type 4) (param $i i32) (result i32)
    (block $l (result (ref any))
      (block (result structref) ;; label = @2
        (br_on_cast_fail $l anyref structref
          (table.get 0
            (local.get $i))))
      (return
        (i32.const 1)))
    (return
      (i32.const 0))
  )
)
